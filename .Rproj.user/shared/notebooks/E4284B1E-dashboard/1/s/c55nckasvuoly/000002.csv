"0","teach_stu_ratio_1 <- teach_stu_ratio %>% "
"0","  pivot_longer(cols = c(""student"", ""teacher""),"
"0","               names_to = ""group"", values_to = ""percent"") %>%"
"0","  mutate(race_eth = factor(race_eth, levels = c(""American Indian or Alaskan Native"", "
"0","                                                ""Asian"", ""Black or African American"", "
"0","                                                ""Filipino"", ""Hispanic"", ""Multiracial"", "
"0","                                                ""Native Hawaiian/Pacific Islander"", "
"0","                                                ""White"", ""Unknown"", ""Unreported""))) %>%"
"0","  filter(dist_name == params$district)"
"0",""
"0","ratio <- teach_stu_ratio_1 %>%"
"0","  ggplot(aes(x = race_eth, y = percent, fill = group)) +"
"0","  geom_col(position = ""dodge"") +"
"0","  coord_flip() +"
"0","  scale_y_continuous(labels = scales::percent) +"
"0","  scale_fill_viridis_d(labels = c(""Student"", ""Teacher"")) +"
"0","  scale_x_discrete(limits = rev) +"
"0","  theme_economist_white() +"
"0","  theme(panel.grid.major.y = element_blank()) + "
"0","  theme(legend.position = ""bottom"", legend.direction = ""horizontal"") +"
"0","  ggtitle(teach_stu_ratio_1$dist_name) +"
"0","  labs(subtitle = ""Teacher-Student Ratio"","
"0","       caption = ""Source: California Department of Education"","
"0","       x = NULL, y = NULL, fill = NULL)"
"0",""
"0","plotly::ggplotly(ratio) %>%"
"0","  layout(legend = list(orientation = ""h"", x = 0.4, y = -0.2))"
